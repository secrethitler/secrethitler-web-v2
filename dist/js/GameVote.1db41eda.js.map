{"version":3,"sources":["webpack:///./src/utils/mergeDefaultParams.ts","webpack:///./src/assets/vote_yes.jpg","webpack:///./src/views/GameVote.vue?15a5","webpack:///./src/views/GameVote.vue","webpack:///./src/api/chancellor/vote.ts","webpack:///./src/actions/voteChancellor.ts","webpack:///./src/views/GameVote.vue?a3e8","webpack:///./src/views/GameVote.vue?0564","webpack:///./src/assets/vote_no.jpg"],"names":["userId","getters","channelName","module","exports","UserVote","render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","_s","chancellor","userName","class","hasVoted","voted","Yes","on","$event","vote","attrs","No","count","members","length","staticRenderFns","votedYes","params","mergeDefaultParams","http","post","voteChancellor","data","disable","NotYet","$gtag","event","event_category","event_label","$store","activeRound","votes","find","computed","component"],"mappings":"0GAAA,gBAGc,kBAIZ,MAAO,CACLA,OAAQ,OAAMC,QAAQD,OACtBE,YAAa,OAAMD,QAAQC,e,qBCT/BC,EAAOC,QAAU,IAA0B,6B,yCCA3C,ICkDKC,EDlDDC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,aAAa,CAACJ,EAAIM,GAAG,cAAcF,EAAG,MAAM,CAACG,YAAY,iCAAiC,CAACH,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,KAAK,CAACG,YAAY,4BAA4B,CAACP,EAAIM,GAAGN,EAAIQ,GAAGR,EAAIS,WAAWC,UAAY,IAAI,mCAAmCN,EAAG,IAAI,CAACJ,EAAIM,GAAG,sCAAsCF,EAAG,MAAM,CAACG,YAAY,2BAA2BI,MAAM,CAAE,aAAcX,EAAIY,SAAU,sBAAuBZ,EAAIY,WAAY,CAACR,EAAG,MAAM,CAACG,YAAY,0DAA0DI,MAAM,CAAE,iBAAkBX,EAAIa,QAAUb,EAAIF,SAASgB,KAAMC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIiB,MAAK,MAAS,CAACb,EAAG,MAAM,CAACc,MAAM,CAAC,IAAM,EAAQ,QAA0B,IAAM,QAAQd,EAAG,MAAM,CAACG,YAAY,0DAA0DI,MAAM,CAAE,iBAAkBX,EAAIa,QAAUb,EAAIF,SAASqB,IAAKJ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIiB,MAAK,MAAU,CAACb,EAAG,MAAM,CAACc,MAAM,CAAC,IAAM,EAAQ,QAAyB,IAAM,UAAUd,EAAG,MAAM,CAACG,YAAY,oDAAoD,CAACP,EAAIM,GAAGN,EAAIQ,GAAGR,EAAIoB,OAAO,MAAMpB,EAAIQ,GAAGR,EAAIqB,QAAQC,QAAQ,uBAAuB,IACzuCC,EAAkB,G,sKEGR,WAAWC,GACvB,IAAMC,EAAM,gBACVD,YACG,OAAAE,EAAA,SAGL,OAAOC,EAAA,KAAKC,KAA6B,mBAAoBH,ICRhD,SAAeI,EAA9B,kC,8DAAe,WAA8BL,GAA9B,uGACU,EAAKA,GADf,kBACLM,KADK,2C,yBFgDf,SAAKhC,GACH,0BACA,oBACA,mBAHF,CAAKA,MAAQ,KASb,IAAqB,EAArB,yG,0BACE,EAAAiC,SAAU,EAEV,EAAAlB,MAAQf,EAASkC,OAEjB,EAAAlC,SAAWA,EALb,iHA4Ba0B,GA5Bb,wFA6BIvB,KAAK8B,SAAU,EA7BnB,kBA+BYF,EAAeL,GA/B3B,OAiCMvB,KAAKY,MAAQW,EAAW1B,EAASgB,IAAMhB,EAASqB,GAEhDlB,KAAKgC,MAAMC,MAAM,OAAQ,CACvBC,eAAgB,OAChBC,YAAanC,KAAKoC,OAAO3C,QAAQC,cArCzC,mDAwCMM,KAAK8B,SAAU,EAxCrB,+IAcI,OAAO9B,KAAKqC,YAAYC,MAAMjB,SAdlC,kCAkBI,OAAOrB,KAAKmB,QAAUnB,KAAKoB,QAAQC,SAlBvC,+BAqBc,WACV,OACErB,KAAK8B,WACA9B,KAAKqC,YAAYC,MAAMC,MAAK,SAACvB,GAAD,OAAgBA,EAAKxB,SAAW,EAAKA,cAxB5E,GAAsC,QAAjB,EAAQ,gBAH5B,eAAU,CACTgD,SAAU,eAAW,CAAC,aAAc,UAAW,cAAe,cAE3C,WG3D8W,I,YCO/XC,EAAY,eACd,EACA3C,EACAwB,GACA,EACA,KACA,KACA,MAIa,aAAAmB,E,8BClBf9C,EAAOC,QAAU,IAA0B","file":"js/GameVote.1db41eda.js","sourcesContent":["import store from '@/store';\nimport { UserID, ChannelName } from '@/types/game';\n\nexport default function (): {\n  userId: UserID,\n  channelName: ChannelName\n  } {\n  return {\n    userId: store.getters.userId,\n    channelName: store.getters.channelName,\n  };\n}\n","module.exports = __webpack_public_path__ + \"img/vote_yes.3421e3c3.jpg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('page-title',[_vm._v(\"Election\")]),_c('div',{staticClass:\"container flex justify-center\"},[_c('div',{staticClass:\"lg:w-1/2\"},[_c('div',{staticClass:\"mb-4\"},[_c('h3',{staticClass:\"font-serif text-2xl mb-4\"},[_vm._v(_vm._s(_vm.chancellor.userName || '')+\" was nominated as chancellor.\")]),_c('p',[_vm._v(\"Do you accept this nomination?\")])]),_c('div',{staticClass:\"pt-6 flex justify-center\",class:{ 'opacity-50': _vm.hasVoted, 'pointer-events-none': _vm.hasVoted }},[_c('div',{staticClass:\"p-6 max-w-xs cursor-pointer border-4 border-transparent\",class:{ 'border-red-700': _vm.voted === _vm.UserVote.Yes },on:{\"click\":function($event){return _vm.vote(true)}}},[_c('img',{attrs:{\"src\":require(\"../assets/vote_yes.jpg\"),\"alt\":\"\"}})]),_c('div',{staticClass:\"p-6 max-w-xs cursor-pointer border-4 border-transparent\",class:{ 'border-red-700': _vm.voted === _vm.UserVote.No },on:{\"click\":function($event){return _vm.vote(false)}}},[_c('img',{attrs:{\"src\":require(\"../assets/vote_no.jpg\"),\"alt\":\"\"}})])]),_c('div',{staticClass:\"pt-8 text-center font-old text-4xl text-gray-700\"},[_vm._v(_vm._s(_vm.count)+\" / \"+_vm._s(_vm.members.length)+\" have voted.\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { mapGetters } from 'vuex';\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport voteChancellor from '../actions/voteChancellor';\nimport {\n  Vote, Round, Member, UserID,\n} from '../types/game';\n\nenum UserVote {\n  NotYet,\n  Yes,\n  No\n}\n\n@Component({\n  computed: mapGetters(['chancellor', 'members', 'activeRound', 'userId']),\n})\nexport default class GameVote extends Vue {\n  disable = false;\n\n  voted = UserVote.NotYet;\n\n  UserVote = UserVote;\n\n  activeRound!: Round;\n\n  members!: Member[];\n\n  userId!: UserID;\n\n  get count(): number {\n    return this.activeRound.votes.length;\n  }\n\n  get hasFinished(): boolean {\n    return this.count === this.members.length;\n  }\n\n  get hasVoted(): boolean {\n    return (\n      this.disable\n      || !!this.activeRound.votes.find((vote: Vote) => vote.userId === this.userId)\n    );\n  }\n\n  async vote(votedYes: boolean) {\n    this.disable = true;\n    try {\n      await voteChancellor(votedYes);\n\n      this.voted = votedYes ? UserVote.Yes : UserVote.No;\n\n      this.$gtag.event('game', {\n        event_category: 'vote',\n        event_label: this.$store.getters.channelName,\n      });\n    } catch (e) {\n      this.disable = false;\n    }\n  }\n}\n","import http from '@/plugins/http';\nimport { ChancellorVoteRequest, ChancellorVoteResponse } from '@/types/http';\nimport mergeDefaultParams from '@/utils/mergeDefaultParams';\n\nexport default function (votedYes: boolean) {\n  const params: ChancellorVoteRequest = {\n    votedYes,\n    ...mergeDefaultParams(),\n  };\n\n  return http.post<ChancellorVoteResponse>('/chancellor/vote', params);\n}\n","import vote from '@/api/chancellor/vote';\n\nexport default async function voteChancellor(votedYes: boolean) {\n  const { data } = await vote(votedYes);\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameVote.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameVote.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameVote.vue?vue&type=template&id=739a7ecc&\"\nimport script from \"./GameVote.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameVote.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/vote_no.65314b9f.jpg\";"],"sourceRoot":""}