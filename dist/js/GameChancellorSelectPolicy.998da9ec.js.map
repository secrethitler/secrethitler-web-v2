{"version":3,"sources":["webpack:///./src/utils/mergeDefaultParams.ts","webpack:///./src/assets/policy_liberal.jpg","webpack:///./src/assets/policy_fascist.jpg","webpack:///./src/types/game.ts","webpack:///./src/utils/navigateTo.ts","webpack:///./src/views/GameChancellorSelectPolicy.vue?d49b","webpack:///./src/api/policy/chancellorPick.ts","webpack:///./src/actions/chancellorPolicyPick.ts","webpack:///./src/api/round/requestVeto.ts","webpack:///./src/actions/requestVeto.ts","webpack:///./src/views/GameChancellorSelectPolicy.vue","webpack:///./src/views/GameChancellorSelectPolicy.vue?0cdd","webpack:///./src/views/GameChancellorSelectPolicy.vue?98f3"],"names":["userId","getters","channelName","module","exports","Role","Policy","Party","availableWhenDead","GameIsKilled","GameWon","GameInfo","route","isDead","includes","push","name","params","id","commit","SET_CURRENT_ACTION","render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","_m","class","discarding","_l","policy","index","key","Liberal","on","$event","enact","attrs","_e","Fascist","requestVeto","staticRenderFns","discardedPolicy","mergeDefaultParams","http","post","chancellorPolicyPick","chancellorPick","data","navigateTo","discardedIndex","discard","policies","$gtag","event","event_category","event_label","$store","activeRound","secret","chancellorPolicies","vetoPossible","computed","component"],"mappings":"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","file":"js/GameChancellorSelectPolicy.998da9ec.js","sourcesContent":["import store from '@/store';\nimport { UserID, ChannelName } from '@/types/game';\n\nexport default function (): {\n  userId: UserID,\n  channelName: ChannelName\n  } {\n  return {\n    userId: store.getters.userId,\n    channelName: store.getters.channelName,\n  };\n}\n","module.exports = __webpack_public_path__ + \"img/policy_liberal.5217f3f3.jpg\";","module.exports = __webpack_public_path__ + \"img/policy_fascist.60739294.jpg\";","import Route from './route';\n\nexport type UserID = number;\n\nexport type Member = {\n  userId: UserID\n  userName: string,\n  roleName?: Role,\n  isCreator?: boolean\n}\n\nexport type PusherMember = {\n  id: string,\n  info: {\n    isChannelCreator: boolean,\n    userName: string\n  }\n}\n\nexport type ChannelName = string;\n\nexport enum Role {\n  Hitler = 'secret hitler',\n  Fascist = 'fascist',\n  Liberal = 'liberal',\n}\n\nexport enum Policy {\n  Fascist = 'fascist',\n  Liberal = 'liberal',\n}\n\nexport enum Party {\n  Fascist = 'fascist',\n  Liberal = 'liberal',\n}\n\nexport type Vote = {\n  userId: UserID,\n  votedYes: boolean\n}\n\ntype Secret = {\n  electable: UserID[],\n  presidentPolicies: Policy[],\n  chancellorPolicies: Policy[],\n  policyPeek: Policy[],\n  vetoPossible: boolean\n}\n\nexport type Round = {\n  presidentId: UserID,\n  chancellorId: null | UserID,\n  chancellorElected: boolean,\n  enactedPolicy: false | Policy,\n  votes: Vote[],\n  secret: Secret\n}\n\nexport type GameState = {\n  token?: string,\n  userId?: UserID,\n  creatorId?: UserID,\n  channelName?: ChannelName,\n  roleName?: Role,\n  currentAction: Route,\n\n  activeRound: number,\n  electionTracker: number,\n  gameOver: false | {\n    party: Party,\n    reason: string\n  },\n\n  members: Member[],\n  connectedMembers: Member[],\n  partyMembers?: Member[],\n  rounds: Round[],\n  killed: UserID[],\n\n  running: boolean\n}\n\nexport type GameGetters = {\n  userId?: UserID,\n  token?: string,\n  channelName?: ChannelName,\n  members?: Member[],\n  partyMembers?: Member[],\n  rounds?: Round[],\n  roleName?: Role,\n  electionTracker?: number,\n\n  you?: Member,\n  creator?: Member,\n  isCreator?: boolean,\n  isElected?: boolean,\n  activeRound?: Round,\n  president?: Member,\n  chancellor?: Member,\n}\n\nexport type StoreRootState = {};\n","import Route from '@/types/route';\nimport router from '@/router';\nimport store from '@/store';\nimport { mutations } from '@/store/game';\n\nconst availableWhenDead = [\n  Route.GameIsKilled,\n  Route.GameWon,\n  Route.GameInfo,\n];\n\nexport default function (route: Route) {\n  // If the current player is dead, we don't want to redirect to the action,\n  // unless the game is over, or he wants to see the info screen.\n  if (store.getters.isDead && !availableWhenDead.includes(route)) {\n    return;\n  }\n\n  router.push({ name: route, params: { id: store.getters.channelName } });\n\n  store.commit(mutations.SET_CURRENT_ACTION, route);\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('page-title',[_vm._v(\"Discard Policy\")]),_c('div',{staticClass:\"container flex justify-center\"},[_c('div',{staticClass:\"lg:w-1/2\"},[_vm._m(0),_c('div',{staticClass:\"flex\",class:{ 'pointer-events-none': _vm.discarding, 'opacity-50': _vm.discarding }},_vm._l((_vm.policies),function(policy,index){return _c('div',{key:index,staticClass:\"px-2 w-full lg:w-1/2\"},[(policy === _vm.Policy.Liberal)?_c('div',{on:{\"click\":function($event){return _vm.enact(index)}}},[_c('img',{attrs:{\"src\":require(\"../assets/policy_liberal.jpg\"),\"alt\":\"Liberal Policy\"}})]):_vm._e(),(policy === _vm.Policy.Fascist)?_c('div',{on:{\"click\":function($event){return _vm.enact(index)}}},[_c('img',{attrs:{\"src\":require(\"../assets/policy_fascist.jpg\"),\"alt\":\"Fascist Policy\"}})]):_vm._e()])}),0),(_vm.vetoPossible)?_c('div',{staticClass:\"mt-8 flex justif-center\"},[_c('button',{staticClass:\"btn shadow\",on:{\"click\":_vm.requestVeto}},[_vm._v(\" Request Veto \")])]):_vm._e()])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-4\"},[_c('h3',{staticClass:\"font-serif text-2xl mb-4\"},[_vm._v(\"Select a policy to enact. The other one will be discarded.\")])])}]\n\nexport { render, staticRenderFns }","import http from '@/plugins/http';\nimport { PolicyChancellorPickRequest, PolicyChancellorPickResponse } from '@/types/http';\nimport { Policy } from '@/types/game';\nimport mergeDefaultParams from '@/utils/mergeDefaultParams';\n\nexport default function (discardedPolicy: Policy) {\n  const params: PolicyChancellorPickRequest = {\n    discardedPolicy,\n    ...mergeDefaultParams(),\n  };\n\n  return http.post<PolicyChancellorPickResponse>('/policy/chancellor-pick', params);\n}\n","import { Policy } from '@/types/game';\nimport presidentPick from '@/api/policy/presidentPick';\nimport navigateTo from '@/utils/navigateTo';\nimport Route from '@/types/route';\nimport chancellorPick from '@/api/policy/chancellorPick';\n\nexport default async function chancellorPolicyPick(discardedPolicy: Policy) {\n  const { data } = await chancellorPick(discardedPolicy);\n\n  navigateTo(Route.GameInfo);\n}\n","import http from '@/plugins/http';\nimport { RoundRequestVetoRequest, RoundRequestVetoResponse } from '@/types/http';\nimport mergeDefaultParams from '@/utils/mergeDefaultParams';\n\nexport default function () {\n  const params: RoundRequestVetoRequest = {\n    ...mergeDefaultParams(),\n  };\n\n  return http.post<RoundRequestVetoResponse>('/round/request-veto', params);\n}\n","import requestVeto from '@/api/round/requestVeto';\n\nexport default async function () {\n  await requestVeto();\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { mapGetters } from 'vuex';\nimport Component from 'vue-class-component';\nimport chancellorPolicyPick from '@/actions/chancellorPolicyPick';\nimport veto from '@/actions/requestVeto';\nimport { Round, Policy } from '../types/game';\n\n@Component({\n  computed: mapGetters(['activeRound']),\n})\nexport default class GameChancellorSelectPolicy extends Vue {\n  discarding = false;\n\n  Policy = Policy;\n\n  activeRound!: Round;\n\n  get policies(): Policy[] {\n    return this.activeRound.secret.chancellorPolicies;\n  }\n\n  get vetoPossible(): boolean {\n    return this.activeRound.secret.vetoPossible;\n  }\n\n  enact(index: number) {\n    const discardedIndex = index === 0 ? 1 : 0;\n\n    this.discard(this.policies[discardedIndex]);\n  }\n\n  async discard(discardedPolicy: Policy) {\n    this.discarding = true;\n\n    try {\n      await chancellorPolicyPick(discardedPolicy);\n\n      this.$gtag.event('game', {\n        event_category: 'chancellor-pick-policy',\n        event_label: this.$store.getters.channelName,\n      });\n    } catch (e) {\n      this.discarding = false;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  requestVeto() {\n    veto();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameChancellorSelectPolicy.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameChancellorSelectPolicy.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameChancellorSelectPolicy.vue?vue&type=template&id=49eb7098&\"\nimport script from \"./GameChancellorSelectPolicy.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameChancellorSelectPolicy.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}