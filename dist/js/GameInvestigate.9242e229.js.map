{"version":3,"sources":["webpack:///./src/utils/mergeDefaultParams.ts","webpack:///./src/assets/membership_liberal.jpg","webpack:///./src/views/GameInvestigate.vue?14a1","webpack:///./src/api/player/investigate.ts","webpack:///./src/actions/investigatePlayer.ts","webpack:///./src/views/GameInvestigate.vue","webpack:///./src/views/GameInvestigate.vue?450e","webpack:///./src/views/GameInvestigate.vue?7cbb","webpack:///./src/assets/membership_fascist.jpg","webpack:///./src/types/game.ts","webpack:///./src/utils/navigateTo.ts"],"names":["userId","getters","channelName","module","exports","render","_vm","this","_h","$createElement","_c","_self","_m","staticClass","_v","investigating","_l","player","key","_s","userName","on","$event","investigate","_e","membership","Party","Liberal","attrs","Fascist","goBack","staticRenderFns","investigatedUser","params","mergeDefaultParams","http","get","investigatePlayer","id","data","undefined","party","$gtag","event","event_category","event_label","$store","navigateTo","GameInfo","members","filter","member","computed","component","Role","Policy","availableWhenDead","GameIsKilled","GameWon","route","isDead","includes","push","name","commit","SET_CURRENT_ACTION"],"mappings":"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","file":"js/GameInvestigate.9242e229.js","sourcesContent":["import store from '@/store';\nimport { UserID, ChannelName } from '@/types/game';\n\nexport default function (): {\n  userId: UserID,\n  channelName: ChannelName\n  } {\n  return {\n    userId: store.getters.userId,\n    channelName: store.getters.channelName,\n  };\n}\n","module.exports = __webpack_public_path__ + \"img/membership_liberal.c7f7eea7.jpg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_c('div',{staticClass:\"container flex justify-center\"},[_c('div',{staticClass:\"lg:w-1/2\"},[_c('h3',{staticClass:\"font-serif text-2xl mb-4\"},[_vm._v(\"You can investigate a player!\")]),_c('p',[_vm._v(\"Select a player to investigate. You will find out his/her party membership.\")]),(_vm.investigating === false)?_c('div',{staticClass:\"mt-8\"},[_c('ul',_vm._l((_vm.investigateable),function(player){return _c('li',{key:player.userId,staticClass:\"py-2 font-serif text-gray-700 cursor-pointer text-xl px-3 bg-white rounded shadow flex justify-between mb-2\"},[_c('span',[_vm._v(_vm._s(player.userName))]),_c('button',{staticClass:\"py-1 px-2 upeprcase text-sm bg-gray-200 text-gray-700 font-bold rounded tracking-wide hover:bg-red-500 hover:text-yellow-200\",on:{\"click\":function($event){return _vm.investigate(player.userId)}}},[_vm._v(\"Investigate\")])])}),0)]):_vm._e(),(_vm.investigating && this.membership)?_c('div',[_c('div',{staticClass:\"flex justify-center py-12\"},[_c('div',{staticClass:\"max-w-xl\"},[(_vm.membership === _vm.Party.Liberal)?_c('img',{attrs:{\"src\":require(\"../assets/membership_liberal.jpg\"),\"alt\":\"Liberal Membership\"}}):_vm._e(),(_vm.membership === _vm.Party.Fascist)?_c('img',{attrs:{\"src\":require(\"../assets/membership_fascist.jpg\"),\"alt\":\"Fascist Membership\"}}):_vm._e()])]),_c('div',{staticClass:\"flex justify-center py-4\"},[_c('button',{staticClass:\"btn shadow\",on:{\"click\":_vm.goBack}},[_vm._v(\"Back\")])])]):_vm._e()])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"font-serif text-white py-4 lg:py-6 mb-8 bg-red-600\"},[_c('h1',{staticClass:\"text-3xl font-bold text-center\"},[_vm._v(\"Investigate Player\")])])}]\n\nexport { render, staticRenderFns }","import http from '@/plugins/http';\nimport { PlayerInvestigateRequest, PlayerInvestigateResponse } from '@/types/http';\nimport { UserID } from '@/types/game';\nimport mergeDefaultParams from '@/utils/mergeDefaultParams';\n\nexport default function (investigatedUser: UserID) {\n  const params: PlayerInvestigateRequest = {\n    investigatedUser,\n    ...mergeDefaultParams(),\n  };\n\n  return http.get<PlayerInvestigateResponse>(`/player/investigate/${investigatedUser}`, { params });\n}\n","import { UserID } from '@/types/game';\nimport investigate from '@/api/player/investigate';\n\nexport default async function investigatePlayer(id: UserID) {\n  const { data } = await investigate(id);\n\n  return data;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport { mapGetters } from 'vuex';\nimport Component from 'vue-class-component';\nimport investigatePlayer from '@/actions/investigatePlayer';\nimport { Party, Member, UserID } from '../types/game';\nimport navigateTo from '../utils/navigateTo';\nimport Route from '../types/route';\n\n@Component({\n  computed: mapGetters(['members', 'userId']),\n})\nexport default class GameInvestigate extends Vue {\n  investigating = false;\n\n  membership?: Party = undefined;\n\n  members!: Member[];\n\n  userId!: UserID;\n\n  Party = Party;\n\n  get investigateable() {\n    return this.members.filter((member) => member.userId !== this.userId);\n  }\n\n  async investigate(id: UserID) {\n    this.investigating = true;\n    try {\n      const { party } = await investigatePlayer(id);\n      this.membership = party;\n\n      this.$gtag.event('game', {\n        event_category: 'investigate',\n        event_label: this.$store.getters.channelName,\n      });\n    } catch (e) {\n      this.investigating = false;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  goBack() {\n    navigateTo(Route.GameInfo);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameInvestigate.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameInvestigate.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameInvestigate.vue?vue&type=template&id=781452de&\"\nimport script from \"./GameInvestigate.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameInvestigate.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/membership_fascist.b6b5f8b1.jpg\";","import Route from './route';\n\nexport type UserID = number;\n\nexport type Member = {\n  userId: UserID\n  userName: string,\n  roleName?: Role,\n  isCreator?: boolean\n}\n\nexport type PusherMember = {\n  id: string,\n  info: {\n    isChannelCreator: boolean,\n    userName: string\n  }\n}\n\nexport type ChannelName = string;\n\nexport enum Role {\n  Hitler = 'secret hitler',\n  Fascist = 'fascist',\n  Liberal = 'liberal',\n}\n\nexport enum Policy {\n  Fascist = 'fascist',\n  Liberal = 'liberal',\n}\n\nexport enum Party {\n  Fascist = 'fascist',\n  Liberal = 'liberal',\n}\n\nexport type Vote = {\n  userId: UserID,\n  votedYes: boolean\n}\n\ntype Secret = {\n  electable: UserID[],\n  presidentPolicies: Policy[],\n  chancellorPolicies: Policy[],\n  policyPeek: Policy[],\n  vetoPossible: boolean\n}\n\nexport type Round = {\n  presidentId: UserID,\n  chancellorId: null | UserID,\n  chancellorElected: boolean,\n  enactedPolicy: false | Policy,\n  votes: Vote[],\n  secret: Secret\n}\n\nexport type GameState = {\n  token?: string,\n  userId?: UserID,\n  creatorId?: UserID,\n  channelName?: ChannelName,\n  roleName?: Role,\n  currentAction: Route,\n\n  activeRound: number,\n  electionTracker: number,\n  gameOver: false | {\n    party: Party,\n    reason: string\n  },\n\n  members: Member[],\n  connectedMembers: Member[],\n  partyMembers?: Member[],\n  rounds: Round[],\n  killed: UserID[],\n\n  running: boolean\n}\n\nexport type GameGetters = {\n  userId?: UserID,\n  token?: string,\n  channelName?: ChannelName,\n  members?: Member[],\n  partyMembers?: Member[],\n  rounds?: Round[],\n  roleName?: Role,\n  electionTracker?: number,\n\n  you?: Member,\n  creator?: Member,\n  isCreator?: boolean,\n  isElected?: boolean,\n  activeRound?: Round,\n  president?: Member,\n  chancellor?: Member,\n}\n\nexport type StoreRootState = {};\n","import Route from '@/types/route';\nimport router from '@/router';\nimport store from '@/store';\nimport { mutations } from '@/store/game';\n\nconst availableWhenDead = [\n  Route.GameIsKilled,\n  Route.GameWon,\n  Route.GameInfo,\n];\n\nexport default function (route: Route) {\n  // If the current player is dead, we don't want to redirect to the action,\n  // unless the game is over, or he wants to see the info screen.\n  if (store.getters.isDead && !availableWhenDead.includes(route)) {\n    return;\n  }\n\n  router.push({ name: route, params: { id: store.getters.channelName } });\n\n  store.commit(mutations.SET_CURRENT_ACTION, route);\n}\n"],"sourceRoot":""}